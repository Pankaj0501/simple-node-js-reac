pipeline {
  agent any
  tools {
    nodejs "Node"
  }

  stages {

    stage('Install Packages') {
      steps {
        git 'https://github.com/Pankaj0501/simple-node-js-reac.git'
        sh 'npm install'
      } 
    }
    stage('Test') {
        parallel {
        stage('Run Tests') {
          steps {
            sh 'npm run test'
          }
        }
        
    }     
}


    stage('Create Build Artifacts') {
        steps {
            sh 'npm run build'
          }
        }
        
    stage("Upload @planetcast") {
            steps {
                withAWS(region:"us-east-2", credentials:"AWS") {
                s3Upload(file:"build", bucket:"reactapprepo")
                }
            }
                }    
            } 
}
         
      
